#!/bin/sh

# Mise √† jour automatique des docs IA avant push
echo "ü§ñ Mise √† jour des fichiers de contexte IA..."
node scripts/update-ai-docs.mjs

# V√©rifier s'il y a des changements
if git diff --quiet docs/ PROJECT_CONTEXT.md .cursorrules .github/copilot-context.md; then
  echo "‚úÖ Aucune mise √† jour n√©cessaire"
else
  echo "üìù Fichiers de contexte IA mis √† jour"
  echo "üí° Ajout automatique des changements au commit..."
  
  # Ajouter les fichiers modifi√©s
  git add docs/CHATGPT_INSTRUCTIONS.md \
          docs/COPILOT_CONTEXT.md \
          PROJECT_CONTEXT.md \
          .cursorrules \
          .github/copilot-context.md 2>/dev/null || true
  
  # Cr√©er un commit de mise √† jour si des fichiers ont √©t√© modifi√©s
  if ! git diff --cached --quiet; then
    git commit -m "docs(ai): auto-update AI context files [skip ci]" --no-verify
    echo "‚úÖ Commit de mise √† jour cr√©√© automatiquement"
  fi
fi
